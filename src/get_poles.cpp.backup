#include "ros/ros.h"
#include "std_msgs/String.h"
#include "laser_loc/pole_scan.h"
#include "laser_loc/scan_point.h"
#include <cmath>

int main(int argc, char **argv)
{
	ros::init(argc, argv, "get_poles");
	ros::NodeHandle n;
	ros::Publisher pole_scan_pub = n.advertise<laser_loc::pole_scan>("pole_scan",1000);
	ros::Rate loop_rate(25);
	int count = 0;
	ROS_INFO("started Node\n");
	while(ros::ok()) 
	{
		float x = 5;		//parameter for input generation
		float y = 5;
		float theta = -2.1;
		float xp1 = 0;
		float yp1 = 0;
		float xp2 = 10;
		float yp2 = 0;
		laser_loc::scan_point p1;		//create scan points for poles
		laser_loc::scan_point p2;
		p1.distance = pow(pow((x-xp1),2)+pow((y-yp1),2),0.5);	//give distance
		p1.angle = atan2((y-yp1),(x-xp1))+3.1415927-theta;		//give angle
		p2.distance = pow(pow(x-xp2,2)+pow(y-yp2,2),0.5);
		p2.angle = atan2((y-yp2),(x-xp2))+3.1415927-theta;
		laser_loc::pole_scan poles;		//create set of scan points
		poles.poles.push_back(p1);
		poles.poles.push_back(p2);
		pole_scan_pub.publish(poles);		//publish scan points
		ros::spinOnce();
		loop_rate.sleep();
	}
}